"use strict";function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,_toPropertyKey(a.key),a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"===_typeof(t)?t:String(t)}function _toPrimitive(e,t){if("object"!==_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var welcomePage=document.querySelector(".welcome-page__container"),itemsListPage=document.querySelector(".items-container"),nextPageButton=document.querySelector(".welcome-page__btn"),displayCurrentDate=document.querySelector(".text-wrapper"),form=document.getElementById("new-category-form"),categoryInput=document.getElementById("category-name"),categoriesConteiner=document.querySelector(".category-box-container"),categories=JSON.parse(localStorage.getItem("categories"))||[],selectedCategoryId=localStorage.getItem("category.selectedCategoryId"),categoriesCounter=document.querySelector(".category-counter"),setHeightContainer=document.querySelector(".category-box-container"),infoHeight=setHeightContainer.getBoundingClientRect().height,leaveWelcomePage=function(e){welcomePage.style.transform="translateX(-100%)",welcomePage.addEventListener("transitionend",(function(e){welcomePage.style.display="none"})),0!=categories.length&&0===categories.length||(itemsListPage.style.transform="translateX(0)",itemsListPage.style.display="flex")},getCurrentDate=function(){var e=new Date,t=Intl.DateTimeFormat().resolvedOptions().timeZone,n=new Intl.DateTimeFormat("en-GB",{dateStyle:"full",timeZone:"".concat(t)}).format(e);displayCurrentDate.innerHTML="Today is, ".concat(n)},updateCategoryCounter=function(){if(0===categories.length)categoriesCounter.innerText="You don't have any categories";else{var e=1===categories.length?"category":"categories";categoriesCounter.innerText="You have ".concat(categories.length," ").concat(e)}},displayCategory=function e(){categoriesConteiner.innerHTML="",categories.forEach((function(t){var n=document.createElement("div");n.classList.add("category-wrapper");var a=document.createElement("li");a.classList.add("category-box","glassmorphism-card"),a.id=t.id,n.appendChild(a);var r=document.createElement("div");r.classList.add("category-box__task"),r.innerHTML='<input class="category-box__name" type="text" value="'.concat(t.categoryName,'" readonly>'),a.appendChild(r);var i=document.createElement("div");i.classList.add("btn-container"),a.appendChild(i);var o=document.createElement("button");o.classList.add("edit-btn"),o.innerHTML='<i class="fas fa-edit"></i>',i.appendChild(o);var s=document.createElement("button");s.classList.add("delete-btn"),s.innerHTML='<i class="fas fa-trash"></i>',i.appendChild(s);var l=document.createElement("button");l.innerHTML="OPEN",l.classList.add("button-open"),i.appendChild(l),s.addEventListener("click",(function(n){n.currentTarget.parentElement.parentElement.parentElement.classList.add("fall"),window.addEventListener("transitionend",(function(){categories=categories.filter((function(e){return e!==t})),selectedCategoryId=null,saveToLocalStorage(),e(),updateCategoryCounter()}))})),o.addEventListener("click",(function(n){var r=a.querySelector(".category-box__name");r.removeAttribute("readonly"),r.addEventListener("focus",(function(e){var t=e.target.value;e.target.setSelectionRange(t.length,t.length)})),r.focus(),r.addEventListener("blur",(function(n){r.setAttribute("readonly",!0),t.categoryName=n.target.value,saveToLocalStorage(),e()}))}));var c=document.createElement("p");c.classList.add("tasks-counter"),c.innerHTML="Click Open and add task/s",a.appendChild(c);var d=document.createElement("div");d.classList.add("progress-bar"),a.appendChild(d);var u=document.createElement("div");u.classList.add("progress-bar-value"),d.appendChild(u);var m=document.createElement("div");m.classList.add("progress-bar-fill"),d.appendChild(m);var p=document.createElement("div");p.classList.add("task-elements-container"),p.innerHTML='\n        <form class="new-task-form">\n          <input\n            class="task-input"\n            type="text"\n            placeholder="Name a new task and enter/click to add..."\n          />\n          <input\n            class="create-task-btn"\n            type="submit"\n            value="Create task"\n          />\n        </form>';var g=document.createElement("div");function f(){0===t.tasks.length?d.style.display="none":d.style.display="block"}function v(){a.classList.add("fullscreen"),l.innerText="CLOSE",p.style.display="flex",a.style.height="".concat(infoHeight,"px")}g.classList.add("tasks-wrapper"),p.appendChild(g),a.appendChild(p),categoriesConteiner.appendChild(n),f(),t.id===selectedCategoryId&&v(),l.addEventListener("click",(function(e){selectedCategoryId=e.target.parentElement.parentElement.id,saveToLocalStorage(),a.classList.contains("fullscreen")?(a.classList.remove("fullscreen"),p.style.display="none",l.innerText="OPEN",selectedCategoryId=null,saveToLocalStorage(),a.style.height="auto"):v()}));for(var y=document.querySelectorAll(".new-task-form"),h=function(e){y[e].addEventListener("submit",(function(t){t.preventDefault();var n=t.currentTarget.parentElement.parentElement.id,a={taskItemName:y[e][0].value,id:(new Date).getTime().toString(),remainingTime:[],complete:!1},r=categories.find((function(e){return e.id===n}));r.tasks.push(a),saveToLocalStorage(),updateCategoryCounter(n),saveToLocalStorage(),t.target.reset(),C()}))},k=0;k<y.length;k++)h(k);var C=function(){g.innerHTML="",f(),t.tasks.forEach((function(e){var n=document.createElement("div");n.classList.add("task-item");var a=document.createElement("div");a.classList.add("task-first"),n.appendChild(a);var r=document.createElement("input");r.classList.add("completed-checkbox"),r.type="checkbox",r.id=e.id,r.checked=e.complete,a.appendChild(r);var i=document.createElement("p");i.classList.add("todo-text"),i.innerHTML="".concat(e.taskItemName),a.appendChild(i),v();var o=document.createElement("div");o.classList.add("timer-container"),a.appendChild(o),g.appendChild(n);var s=t.tasks.filter((function(e){return e.complete})).length,l=Math.floor(100*s/t.tasks.length);t.taskRatio.pop(),t.taskRatio.push(l),saveToLocalStorage();var p=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;_classCallCheck(this,e),this.valueElement=u,this.fillElement=m,this.setValue(n)}return _createClass(e,[{key:"setValue",value:function(e){if(isNaN(e))return 0;e<=0&&(e=0),e>100&&(e=100),this.value=e,this.update()}},{key:"update",value:function(){var e=this.value+"%";this.fillElement.style.width=e,this.valueElement.textContent=e}}]),e}();new p(d,t.taskRatio);var f=function(){function n(a){var i=this;_classCallCheck(this,n),a.innerHTML=n.getHTML(),this.el={minutes:a.querySelector(".timer__part--minutes"),seconds:a.querySelector(".timer__part--seconds"),control:a.querySelector(".timer__btn--control"),reset:a.querySelector(".timer__btn--reset"),timeForm:a.querySelector(".time-form"),timeValue:a.querySelector(".time-value"),notificationBox:a.querySelector(".notification-time-box"),closeBoxButton:a.querySelector(".btn-close-box")},this.interval=null,this.remainingSeconds="".concat(e.remainingTime),this.start(),this.stop(),this.updateInterfaceTime(),this.updateInterfaceControls(),this.el.control.addEventListener("click",(function(e){null===i.interval?i.start():(i.stop(),i.updateRemainingTime())})),this.el.reset.addEventListener("click",(function(e){i.el.notificationBox.style.display="flex"})),this.el.closeBoxButton.addEventListener("click",(function(e){i.el.notificationBox.style.display="none"})),this.el.timeForm.addEventListener("submit",(function(n){n.preventDefault();var a=i.el.timeValue.value,o=n.currentTarget.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.id,s=n.currentTarget.parentElement.parentElement.parentElement.parentElement.previousSibling.previousSibling.id,l=categories.find((function(e){return e.id===o})),c=l.tasks.find((function(e){return e.id===s}));c.remainingTime.pop(),c.remainingTime.push(a),saveToLocalStorage(),i.el.notificationBox.style.display="none",n.target.reset(),a<60&&(i.stop(),i.remainingSeconds=60*"".concat(c.remainingTime),i.updateRemainingTime(),i.updateInterfaceTime()),r.checked=!1,e.complete=!1,saveToLocalStorage(),v();var u=t.tasks.filter((function(e){return e.complete})).length,m=Math.floor(100*u/t.tasks.length);t.taskRatio.pop(),t.taskRatio.push(m),localStorage.setItem("categories",JSON.stringify(categories)),new p(d,t.taskRatio)}))}return _createClass(n,[{key:"updateRemainingTime",value:function(){e.remainingTime.pop(),e.remainingTime.push(this.remainingSeconds),localStorage.setItem("categories",JSON.stringify(categories))}},{key:"updateThisTasksRatio",value:function(e){this.categories=JSON.parse(localStorage.getItem("categories"))||[],this.selectedCategory=this.categories.find((function(t){return t.id===e})),this.completeTaskCount=this.selectedCategory.tasks.filter((function(e){return e.complete})).length,this.taskRatioNumber=Math.floor(100*this.completeTaskCount/this.selectedCategory.tasks.length),this.selectedCategory.taskRatio.pop(),this.selectedCategory.taskRatio.push(this.taskRatioNumber),saveToLocalStorage(),new p(d,this.selectedCategory.taskRatio)}},{key:"updateInterfaceControls",value:function(){null===this.interval?(this.el.control.innerHTML="<p>play</p>",this.el.control.classList.add("timer__btn--start"),this.el.control.classList.remove("timer__btn--stop")):(this.el.control.innerHTML="<p>pause</p>",this.el.control.classList.add("timer__btn--stop"),this.el.control.classList.remove("timer__btn--start"))}},{key:"updateInterfaceTime",value:function(){var e=Math.floor(this.remainingSeconds/60),t=this.remainingSeconds%60;this.el.minutes.textContent=e.toString().padStart(2,"0"),this.el.seconds.textContent=t.toString().padStart(2,"0")}},{key:"start",value:function(){var t=this;0!==this.remainingSeconds&&(this.interval=setInterval((function(){t.remainingSeconds--,t.updateInterfaceTime(),0===t.remainingSeconds&&(t.stop(),r.checked=!0,e.complete=!0,v(),saveToLocalStorage())}),1e3),this.updateInterfaceControls())}},{key:"stop",value:function(){clearInterval(this.interval),this.interval=null,this.updateInterfaceControls()}}],[{key:"getHTML",value:function(){return'\n                        <div class="notification-time-box glassmorphism-card">\n                            <div class="set-time-box">\n                                <div class="set-time-box__content">\n                                    <h2 class="time-title">Put Time</h2>\n                                    <button class="btn-close-box">\n                                    <i class="fa-solid fa-circle-xmark"></i>\n                                    </button>\n                                </div>\n                \n                                <div class="set-time-box__input-wrapper">\n                                    <form class="time-form">\n                                        <input\n                                            class="time-value"\n                                            id="time-value"\n                                            type="input"\n                                            placeholder="e.g 20 etc"\n                                        />\n                                    </form>\n                                </div>\n                            </div>\n                        </div>\n                        <span class="timer__part timer__part--minutes">00</span>\n                        <span class="timer__part timer__part--semicolons">:</span>\n                        <span class="timer__part timer__part--seconds">00</span>\n                    \n                        <button\n                            type="button"\n                            class="timer__btn timer__btn--control timer__start"\n                        >\n                        </button>\n                    \n                        <button\n                            type="button"\n                            class="timer__btn timer__btn--reset timer__setup"\n                        >\n                            <p>setup</p>\n                        </button>'}}]),n}();function v(){var e=t.tasks.filter((function(e){return!e.complete})).length,n=t.tasks.filter((function(e){return e.complete})).length;if(0===e)c.innerText="You have done everything! Good Job!";else{var a=Math.floor(100*n/t.tasks.length),r=1===e?"task":"tasks";c.innerText="".concat(e," ").concat(r," remaining ").concat(a,"% done")}}new f(o),r.addEventListener("click",(function(e){r.checked;var n=r.parentElement.parentElement.parentElement.parentElement.parentElement.id,a=categories.find((function(e){return e.id===n})),i=a.tasks.find((function(t){return t.id===e.target.id}));i.complete=e.target.checked,saveToLocalStorage(),v();var o=a.tasks.filter((function(e){return e.complete})).length,s=Math.floor(100*o/t.tasks.length);t.taskRatio.pop(),t.taskRatio.push(s),saveToLocalStorage(),new p(d,a.taskRatio)}))}))};C()}))},saveToLocalStorage=function(){localStorage.setItem("categories",JSON.stringify(categories)),localStorage.setItem("category.selectedCategoryId",selectedCategoryId)};window.addEventListener("DOMContentLoaded",(function(e){getCurrentDate(),displayCategory(),updateCategoryCounter()})),nextPageButton.addEventListener("click",leaveWelcomePage),form.addEventListener("submit",(function(e){if(e.preventDefault(),null!=categoryInput&&""!==categoryInput){var t={categoryName:categoryInput.value.trim(),id:(new Date).getTime().toString(),taskRatio:[],tasks:[]};categories.push(t),saveToLocalStorage(),e.target.reset(),displayCategory(),updateCategoryCounter()}}));
//# sourceMappingURL=script.js.map