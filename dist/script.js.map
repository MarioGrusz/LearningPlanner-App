{"version":3,"sources":["script.js"],"names":["welcomePage","document","querySelector","itemsListPage","nextPageButton","displayCurrentDate","form","getElementById","categoryInput","categoriesConteiner","categories","JSON","parse","localStorage","getItem","selectedCategoryId","categoriesCounter","setHeightContainer","infoHeight","getBoundingClientRect","height","leaveWelcomePage","e","style","transform","addEventListener","display","console","log","length","getCurrentDate","date","Date","clientTimeZone","Intl","DateTimeFormat","resolvedOptions","timeZone","currentDate","dateStyle","concat","format","innerHTML","updateCategoryCounter","innerText","categoryString","displayCategory","forEach","category","categoryWrapper","createElement","classList","add","categoryItem","id","appendChild","categoryItemTask","categoryName","editDeleteBtnContainer","editBtn","deleteBtn","openButton","currentTarget","parentElement","window","filter","item","saveToLocalStorage","input","removeAttribute","value","target","setSelectionRange","focus","setAttribute","tasksCounter","taskElementsContainer","tasksWrapper","openElement","contains","remove","setItem","stringify","preventDefault","trim","getTime","toString","taskRatio","tasks","push","reset"],"mappings":"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","file":"script.js","sourcesContent":["// ****** SELECT ITEMS **********\r\n\r\nconst welcomePage = document.querySelector('.welcome-page__container');\r\nconst itemsListPage = document.querySelector('.items-container');\r\nconst nextPageButton = document.querySelector('.welcome-page__btn');\r\n\r\nconst displayCurrentDate = document.querySelector('.text-wrapper');\r\n\r\nconst form = document.getElementById('new-category-form');\r\nconst categoryInput = document.getElementById('category-name');\r\nconst categoriesConteiner = document.querySelector('.category-box-container');\r\n\r\nlet categories = JSON.parse(localStorage.getItem('categories')) || [];\r\nlet selectedCategoryId = localStorage.getItem('category.selectedCategoryId');\r\n\r\nconst categoriesCounter = document.querySelector('.category-counter');\r\nconst setHeightContainer = document.querySelector('.category-box-container');\r\nconst infoHeight = setHeightContainer.getBoundingClientRect().height; ///????????\r\n\r\n\r\n\r\n\r\n\r\n// ****** FUNCTIONS **********\r\n\r\n// PAGE TRANSITION\r\nconst leaveWelcomePage = (e) => {\r\n    \r\n    welcomePage.style.transform = \"translateX(-100%)\";\r\n    //welcomePage.style.display = 'none';\r\n    welcomePage.addEventListener(\"transitionend\", (e) => {\r\n        welcomePage.style.display = \"none\"\r\n        console.log('displayNone')\r\n    });\r\n    if(categories.length == 0 || categories.length !== 0) {\r\n      itemsListPage.style.transform = \"translateX(0)\";\r\n      itemsListPage.style.display = \"flex\";\r\n    }\r\n};\r\n\r\n// CURRENT DATE\r\nconst getCurrentDate = () => {\r\n    const date = new Date();\r\n    const clientTimeZone = Intl.DateTimeFormat().resolvedOptions().timeZone;\r\n    const currentDate = new Intl.DateTimeFormat('en-GB', { dateStyle: 'full', timeZone: `${clientTimeZone}`}).format(date);\r\n    displayCurrentDate.innerHTML = `Today is, ${currentDate}`;\r\n};\r\n\r\n\r\n//SHOW / UPDATE CATEGORY COUNTER/NUMBER\r\nconst updateCategoryCounter = () => {\r\n \r\n    if (categories.length === 0 ) {\r\n       categoriesCounter.innerText = \"You don't have any categories\";\r\n    } else {\r\n      const categoryString = categories.length === 1 ? \"category\" : \"categories\"\r\n      categoriesCounter.innerText = `You have ${categories.length} ${categoryString}`;\r\n      \r\n    }  \r\n};\r\n\r\n//RENDER CATEGORY\r\nconst displayCategory = () => {\r\n    categoriesConteiner.innerHTML = '';\r\n\r\n    categories.forEach(category => {\r\n\r\n        const categoryWrapper = document.createElement('div');\r\n        categoryWrapper.classList.add('category-wrapper');\r\n\r\n        const categoryItem = document.createElement('li');\r\n        categoryItem.classList.add('category-box', 'glassmorphism-card');\r\n        categoryItem.id = category.id;\r\n        categoryWrapper.appendChild(categoryItem);   \r\n\r\n        const categoryItemTask = document.createElement('div');\r\n        categoryItemTask.classList.add('category-box__task');\r\n        categoryItemTask.innerHTML = `<input class=\"category-box__name\" type=\"text\" value=\"${category.categoryName}\" readonly>`;\r\n        categoryItem.appendChild(categoryItemTask);\r\n\r\n        const editDeleteBtnContainer = document.createElement('div');\r\n        editDeleteBtnContainer.classList.add('btn-container');\r\n        categoryItem.appendChild(editDeleteBtnContainer);\r\n\r\n        const editBtn = document.createElement('button');\r\n        editBtn.classList.add('edit-btn');\r\n        editBtn.innerHTML = `<i class=\"fas fa-edit\"></i>`;\r\n        editDeleteBtnContainer.appendChild(editBtn);\r\n\r\n        const deleteBtn = document.createElement('button');\r\n        deleteBtn.classList.add('delete-btn');\r\n        deleteBtn.innerHTML = `<i class=\"fas fa-trash\"></i>`;\r\n        editDeleteBtnContainer.appendChild(deleteBtn);\r\n\r\n        const openButton = document.createElement('button');\r\n        openButton.innerHTML = 'OPEN';\r\n        openButton.classList.add('button-open');\r\n        editDeleteBtnContainer.appendChild(openButton);\r\n\r\n        deleteBtn.addEventListener('click', deleteElement); //DELETE BUTTON\r\n        editBtn.addEventListener('click', editElement); // EDIT BUTTON\r\n\r\n        const tasksCounter = document.createElement('p');\r\n        tasksCounter.classList.add('tasks-counter');\r\n        tasksCounter.innerHTML = \"Click Open and add task/s\"\r\n        categoryItem.appendChild(tasksCounter);\r\n\r\n        const taskElementsContainer = document.createElement('div');\r\n        taskElementsContainer.classList.add('task-elements-container');\r\n        taskElementsContainer.innerHTML = `\r\n        <form class=\"new-task-form\">\r\n          <input\r\n            class=\"task-input\"\r\n            type=\"text\"\r\n            placeholder=\"Name a new task and enter/click to add...\"\r\n          />\r\n          <input\r\n            class=\"create-task-btn\"\r\n            type=\"submit\"\r\n            value=\"Create task\"\r\n          />\r\n        </form>` \r\n\r\n        const tasksWrapper = document.createElement('div');\r\n        tasksWrapper.classList.add('tasks-wrapper');\r\n        taskElementsContainer.appendChild(tasksWrapper);\r\n    \r\n        categoryItem.appendChild(taskElementsContainer);\r\n\r\n        categoriesConteiner.appendChild(categoryWrapper); //APPEND TO MAIN CONTAINER\r\n\r\n        //DELETE FUNCTION\r\n        function deleteElement(e){\r\n           \r\n            let thisItem = e.currentTarget.parentElement.parentElement.parentElement;\r\n            thisItem.classList.add('fall');\r\n\r\n            window.addEventListener('transitionend', function(){\r\n                categories = categories.filter(item => item !== category);\r\n                selectedCategoryId = null;\r\n                \r\n                saveToLocalStorage();\r\n                displayCategory();\r\n                updateCategoryCounter(); \r\n\r\n            });\r\n        };\r\n  \r\n        //EDIT FUNCTION\r\n        function editElement(e){\r\n  \r\n            const input = categoryItem.querySelector('.category-box__name')\r\n            input.removeAttribute('readonly');\r\n    \r\n            //Cursor at the end of text\r\n            input.addEventListener('focus', e => {\r\n            const { value } = e.target;\r\n            e.target.setSelectionRange(value.length, value.length);\r\n            });\r\n    \r\n            input.focus();\r\n            input.addEventListener('blur', (e) => {\r\n            input.setAttribute('readonly', true);\r\n            category.categoryName = e.target.value;\r\n            saveToLocalStorage();\r\n            displayCategory();\r\n            });   \r\n        };\r\n\r\n        function openElement(){\r\n            categoryItem.classList.add('fullscreen'); \r\n            openButton.innerText = 'CLOSE';\r\n            taskElementsContainer.style.display = 'flex';\r\n            categoryItem.style.height = `${infoHeight}px`;\r\n        };\r\n\r\n\r\n        //SAVE FULLSCREEN OPTION ON REFRESH\r\n        if (category.id === selectedCategoryId) { \r\n          openElement();\r\n        };\r\n\r\n      \r\n        //CATEGORY BOX TO FULLSCREEN \r\n        openButton.addEventListener('click', e => {\r\n\r\n            selectedCategoryId = e.target.parentElement.parentElement.id;\r\n            saveToLocalStorage();\r\n                        \r\n            if (categoryItem.classList.contains('fullscreen')){\r\n                categoryItem.classList.remove('fullscreen');\r\n                taskElementsContainer.style.display = 'none'\r\n                openButton.innerText = 'OPEN';\r\n                selectedCategoryId = null;\r\n                saveToLocalStorage();\r\n\r\n                categoryItem.style.height = 'auto';\r\n\r\n            } else {\r\n                openElement();\r\n\r\n                //const infoHeight = setHeightContainer.getBoundingClientRect().height;\r\n                categoryItem.style.height = `${infoHeight}px`;\r\n            }\r\n        }); \r\n\r\n    });\r\n};\r\n\r\n\r\n//LOCAL STORAGE - SAVE TO LOCAL STORAGE\r\nconst saveToLocalStorage = () => {\r\n    localStorage.setItem('categories', JSON.stringify(categories));\r\n    localStorage.setItem('category.selectedCategoryId', selectedCategoryId);\r\n};\r\n\r\n\r\n\r\n// ****** EVENT LISTENERS **********\r\nwindow.addEventListener('DOMContentLoaded', e => {\r\n    getCurrentDate();\r\n    displayCategory();\r\n    updateCategoryCounter();\r\n});\r\n\r\n// SELECTED CATEGORY ID\r\n\r\n\r\nnextPageButton.addEventListener('click', leaveWelcomePage);\r\n\r\nform.addEventListener('submit', e =>{\r\n    e.preventDefault()\r\n  \r\n    if (categoryInput == null || categoryInput === '') return;\r\n  \r\n    const category = {\r\n  \r\n      categoryName: categoryInput.value.trim(),\r\n      id: new Date().getTime().toString(),\r\n      taskRatio: [],\r\n      tasks: [],\r\n    };\r\n\r\n    categories.push(category);\r\n    saveToLocalStorage();\r\n    e.target.reset();\r\n    \r\n    displayCategory();\r\n    updateCategoryCounter();\r\n\r\n});\r\n  \r\n\r\n\r\n\r\n\r\n\r\n// ****** LOCAL STORAGE **********"]}